import argparse
from collections import Counter
from functools import lru_cache
import pathlib

@lru_cache(maxsize=128)

def count_unique_bykv(text:str) -> int:

    if not isinstance(text, str):
        raise ValueError('text must be a string')

    cnt = Counter(text)

    f = cnt.values()

    u_count = 0
    for i in f:
        if i == 1:
            u_count += 1
    return u_count

def main():
    parser = argparse.ArgumentParser()

    parser.add_argument("--string", type=str)
    parser.add_argument("--file", type=str)

    args = parser.parse_args()

    if args.file:
        text = pathlib.Path(args.file).read_text(encoding="utf-8")
    elif args.string:
        text = args.string
    else:
        parser.error("--string или --file")

    print(count_unique_bykv(text))


if __name__ == "__main__":   # pragma: no cover
    main()

